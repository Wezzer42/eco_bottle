# EcoBottle CI/CD Pipeline

–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ EcoBottle.

## Workflows

### üöÄ Main CI/CD Pipeline (`ci.yml`)
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**: Push –≤ `main`/`develop`, Pull Requests –≤ `main`
- **–≠—Ç–∞–ø—ã**:
  1. **Lint & Test** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç—ã
  2. **Security Scan** - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
  3. **Build Images** - –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
  4. **Deploy** - –î–µ–ø–ª–æ–π –Ω–∞ production (—Ç–æ–ª—å–∫–æ –¥–ª—è `main`)

### üß™ Tests (`test.yml`)
- **Unit Tests** - –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã –¥–ª—è backend –∏ frontend
- **Integration Tests** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API –∏ E2E

### üìä Load Testing (`load-test.yml`)
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**: –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–∫–∞–∂–¥—É—é –Ω–æ—á—å) –∏–ª–∏ —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
- **Artillery** - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### üîí Security Analysis (`codeql.yml`)
- **CodeQL** - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**: Push, PR, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

## Services

–í—Å–µ workflows –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
- **PostgreSQL 16** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **Redis 7** - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è CI:
```bash
DATABASE_URL=postgresql://testuser:testpass@localhost:5432/testdb
REDIS_URL=redis://localhost:6379
JWT_SECRET=test-secret-key
```

### –î–ª—è production –¥–µ–ø–ª–æ—è:
```bash
GITHUB_TOKEN  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
```

## Docker Images

–û–±—Ä–∞–∑—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ GitHub Container Registry:
- `ghcr.io/username/eco_bottle/backend:latest`
- `ghcr.io/username/eco_bottle/frontend:latest`

## Dependabot

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
- **Backend npm** - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º
- **Frontend npm** - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º  
- **GitHub Actions** - –ï–∂–µ–º–µ—Å—è—á–Ω–æ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**:
   ```bash
   # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–∞–∫ –≤ CI
   npm test
   npm run lint
   npm run type-check
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–æ–≤**:
   ```bash
   docker-compose -f docker-compose.ci.yml up --build
   ```

3. **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ load —Ç–µ—Å—Ç–æ–≤**:
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ Actions ‚Üí Load Testing ‚Üí Run workflow

## –°—Ç–∞—Ç—É—Å—ã

- ‚úÖ **CI Setup** - –û—Å–Ω–æ–≤–Ω–æ–π pipeline –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ **Tests** - Unit –∏ Integration —Ç–µ—Å—Ç—ã
- ‚úÖ **Docker** - –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ **Security** - CodeQL –∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- üîÑ **Deploy** - –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ target —Å–µ—Ä–≤–µ—Ä–∞)
